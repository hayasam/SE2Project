\pagebreak
\subsection{Taxi driver: acceptance of a request}
\subsubsection{Scenario}
Bob is a Taxi driver that works in the large city and has already installed the application \textit{myTaxiService - Taxi Driver Edition}.
He is in the middle of his working day (so he has already executed the procedure at "Taxi driver: start of the working day") and he is waiting in a taxi queue corresponding to his actual location in the city.\\
Suddenly a pop-up shows up saying that there is a new request for a ride and he is asked to say if he wants to accept it or not.
He accepts it and another screen opens specifying the location of the Passenger. The systems automatically sets the Bob's taxi as "busy": the taxi is removed from the taxi queue\\
Bob go to the location specified, picks up Alice and brings her to her desired location. At the end of the ride, Bob set himself as available. The system, based on his actual location, computes his taxi zone and puts him in the corresponding taxi queue.

\subsubsection{Use case}
\begin{center}
\centering
\begin{longtable}{| p{.20\textwidth} | p{.80\textwidth} |} \hline
Use case & \textbf{Accept a request} \\ \hline 
Actors & Taxi Driver, Passenger \\ \hline
Goals & \begin{itemize}
			\item A Taxi Driver must receive requests only if he is available
			\item A Taxi Driver must be able to choose if he wants to accept an incoming request or not
		\end{itemize} \\ \hline
Enter condition & The taxi driver must have already opened the application and must already be in a taxi queue \\ \hline
Event flow & \begin{enumerate}
				\item The system receives a request from a Passenger, computes the correspondent taxi zone and retrieves the taxi queue
				\item The system picks the first taxi driver in the queue \label{firstTaxiDriver} and forwards to the taxi driver the request
				\item If the taxi driver refuses to accept the request:
				\begin{enumerate}
					\item The system puts the taxi driver at the bottom of the queue
					\item Go back to Event flow \ref{firstTaxiDriver}
				\end{enumerate}
				\item The system removes the taxi driver from the taxi queue and sets him as busy
				\item The system communicates the taxi driver with information about the meeting point
				\item The taxi driver reaches the meeting point and takes the passenger to the location he desires
				\item The taxi driver set himself as available
				\item Go to "Use case: Start Working", Event flow 2
			\end{enumerate} \\ \hline
Exit condition & A taxi driver is on his way to the meeting point with the passenger  \\ \hline
\caption{Use case: Accept a request}
\end{longtable}
\end{center}
See also table \ref{requestTaxiUC} and table \ref{reserveTaxiUC}.

\subsubsection{Sequence diagram}
See figure \ref{request_positive_TaxiSD}, \ref{request_negative_TaxiSD} and \ref{reserve_taxi_SD}

